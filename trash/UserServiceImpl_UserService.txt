package Model.User;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.DuplicateFormatFlagsException;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import Model.DataBase;
import VO.UserVO;

public class UserServiceImpl  implements UserService {
	
	private Connection conn;
	private PreparedStatement ps;
	private ResultSet rs;
	private String sql;
	DataBase db = new DataBase();
//	private HttpServletRequest req;
//	private HttpServletResponse resp;
//	
//	public UserServiceImpl() {
//		//? 
//	}
//	
//	public UserServiceImpl(HttpServletRequest req, HttpServletResponse resp) {
//		this.req = req;
//		this.resp = resp; //?
//	}
	
	@Override
	public int checkUsernameDuplicate(String user_ID) throws DuplicateFormatFlagsException {
//		Connection conn = null;
//		PreparedStatement pstmt = null;
//		ResultSet rs = null;
	
		String sql = "SELECT COUNT(username) FROM user WHERE username = ?";
		int result = 0;

		    try (Connection conn = db.getConnection();
		         PreparedStatement pstmt = conn.prepareStatement(sql)) {
		        pstmt.setString(1, user_ID);
		        try (ResultSet rs = pstmt.executeQuery()) {
		            if (rs.next()) {
		                result = rs.getInt(1);
		            }
		        }
		    } catch (Exception e) {
		        e.printStackTrace();
		    }

		    if (result > 0) {
		        throw new DuplicateFormatFlagsException(sql); //?
		    }
		    return result;
		}

	@Override
	public int SignUp(UserVO user) {
		// TODO Auto-generated method stub
		return 0;
	}

	@Override
	public UserVO getUserByUsername(String user_ID) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public UserVO SignIn(String user_ID, String user_PW) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public int deleteUserByUsername(UserVO user_ID) {
		// TODO Auto-generated method stub
		return 0;
	}

	@Override
	public int checkPassword(String User_PW) {
		// TODO Auto-generated method stub
		return 0;
	}

	@Override
	public int resetPassword(String User_ID, String phone_Num, String newPassword) {
		// TODO Auto-generated method stub
		return 0;
	}

}



--------------------------------


package Model.User;

import java.util.DuplicateFormatFlagsException;
import VO.UserVO;

public interface UserService {
	public int checkUsernameDuplicate(String user_ID) throws DuplicateFormatFlagsException;
	public int SignUp(UserVO user);
	public UserVO getUserByUsername(String user_ID);
	public UserVO SignIn(String user_ID, String user_PW);
	
	public int deleteUserByUsername(UserVO user_ID);
	
	public int checkPassword(String User_PW);
	public int resetPassword(String User_ID, String phone_Num, String newPassword);
	
	//public int checkValidEmail(String email); // email confirmation
	//public int updateProfile(UserVO user);
}

----------------------



<form action="" method="post" name="myForm">
<table align="center" cellpadding="0" cellspacing="0">
<div class="container" style="width: 700px;">
  <div class="row mb-3 mt-3">
    <div class="">
    <label for="inputEmail3" class="col-4 col-form-label mt-5">아이디</label>
      <tr height="25">
	<td width="80" bgcolor="#e6e4e6" align="center">아이디</td>
	<td width="120" style="padding-left: 5px;">
	<input type="text" name="user_ID" maxlength="10" size="15"/>
	</td>
	</tr>
    </div>
  </div>
  <div class="row mb-3">
    <div class="">
    <tr height="25">
	<td width="80" bgcolor="#e6e4e6" align="center">패스워드</td>
	<td width="120" style="padding-left: 5px;">
	<input type="password" name="user_PW" maxlength="10" size="15"/>
	</td>
	</tr>
    </div>
  </div>
  <button type="submit" class="btn btn-primary">로그인</button>
  <a href="/SignUp" style="font-size: 13px;">회원가입</a>
  <a href="" style="font-size: 13px;">비밀번호 잊음</a>
</div>
</table>

</form>--

---

    <script type="text/javascript">
        function login() {
            var f = document.myForm;

            if (!f.userID.value) {
                alert("아이디를 입력하세요.");
                f.userID.focus();
                return;
            }

            if (!f.userPW.value) {
                alert("패스워드를 입력하세요.");
                f.userPW.focus();
                return;
            }

            f.action = "index.jsp";
            f.submit();
        }
    </script>